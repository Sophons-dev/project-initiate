// User Models
// This file contains all user-related models

model User {
  id            String    @id @map("_id") @db.ObjectId @default(auto())
  name          String?
  email         String?   @unique
  emailVerified DateTime?
  image         String?
  auth0Id       String?   @unique

  // Role Reference
  roleId        String    @db.ObjectId
  role          Role      @relation("UserToRole", fields: [roleId], references: [id])

  // Profile fields
  fullName     String?
  avatarUrl    String?
  bio          String?
  location     String?
  organization String?
  website      String?

  // Preferences fields
  interests                 String[]
  goals                     String?
  preferredOpportunityTypes String[]
  skills                    String[]
  onboardingCompleted       Boolean   @default(false)
  preferencesUpdatedAt      DateTime?

  // Relations
  opportunities     UserOpportunity[]
  questionAnswers   UserQuestionAnswer[]
  modelData         UserModelData?
  recommendations   OpportunityRecommendation[]
  careerInsights    CareerInsight[]
  careerInsightLogs CareerInsightLog[]
}

model UserModelData {
  id               String    @id @map("_id") @db.ObjectId
  userId           String    @unique @db.ObjectId
  learningStyle    String
  availability     String
  preferredWorkEnv String
  remoteFriendly   Boolean
  updatedAt        DateTime?
  user             User      @relation(fields: [userId], references: [id])
}

model UserQuestionAnswer {
  id         String    @id @map("_id") @db.ObjectId
  userId     String    @db.ObjectId
  questionId String    @db.ObjectId
  answer     String
  updatedAt  DateTime?
  user       User      @relation(fields: [userId], references: [id])
  question   Question  @relation(fields: [questionId], references: [id])

  @@index([userId])
  @@index([questionId])
}
